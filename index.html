<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>rock paper scissors Game</title>

  <style>
    body{
      font-family: Arial;
      background-color: rgb(25,25,25);
    }
  
    .rps{
      color: white;
      height: 100vh;
      width: 100%;
      padding: 2rem;
      text-align: center;
    }
    .budiv{
      text-align: center;
      width: 100%;
    }
    .gbt{
      font-size: 3.5rem;
      background: transparent;
      border: 2px solid white;
      border-radius: 100000rem;
      width: 120px;
      height: 120px;
      margin: 3px;
    }
    .reb{
      justify-self: center;
      display: flex;
      border-radius: 5px 10px;
      background-color: blue;
      color: white;
      font-size: 1.5rem;
      margin-bottom: 3rem;
      margin-top: 2rem;
      padding: 8px 15px;
      border: none;
      cursor: pointer;
      }

    @media screen and (max-width: 600px) {
      .gbt{
        width: 6rem;
        height: 6rem;
      }
      .budiv{
        display: flex;
        justify-content: space-around;
      }
      
    }
  </style>

</head>
<body>
    <div class="rps">
      <p style="font-size: 30px; font-weight: bold; margin-bottom: 2rem;">Welcome to Riko's rock paper scissors üôâ</p>
      <p style="font-size: 20px; font-weight: bold;">Tap to Play</p>
      <div class="budiv"> 
        <button class="gbt"
          onclick="playgame('rock')
          // alert(`You picked rock. I picked ${como+'. '+result}.`)">
            ‚úä </button>

        <button class="gbt"
          onclick="playgame('paper')">
            üñê</button>

        <button class="gbt"
          onclick="
          playgame('scissors')">
            ‚úå</button>
      </div> 
      <p style="font-size: 20px; font-weight: bold;" class="js-rez"></p>
      <p style="font-size: 20px; font-weight: bold;" class="js-moves"></p>
      <p style="font-size: 20px; font-weight: bold;" class="js-score"></p>

      <button class="aupb eaup reb">Auto Play</button>
      <button class="reb" onclick="raut();
        score.wins = 0; score.losses = 0; score.ties = 0;
        localStorage.removeItem('score');
        upse()
        document.querySelector('.js-moves').innerHTML =''">Reset</button>
      
      <a style="color: rgb(42, 89, 190); margin-top: 23rem;" href="https://github.com/Prosperiko/RPS-game.git">Click Here to View Code</a>

  </div>

  <script>
    alert('You can turn off your internet connection after the page has been loaded.') 
    let score = JSON.parse(localStorage.getItem('score')) || {
      wins : 0,
      losses : 0,
      ties: 0
    };
    upse()
    let cpic ='';
    let pic;
    function playgame(playermove) {
      const como = pickm()
      // console.log(como)
      let result = '';

      if (playermove == 'scissors') {
        pic = '‚úå'
        if (como ==='rock'){
          result =  'You lose';
        }else if (como === 'paper'){
            result = 'You win';
        }else{
          result = 'Tie';
        }

      }else if (playermove == 'paper') {
        pic = 'üñê'
        if (como ==='rock'){
          result =  'You win';
        }else if (como === 'paper'){
            result = 'Tie';
        }else{
          result = 'You lose';
        }

      }else if (playermove === 'rock') {
        pic= '‚úä'
        if (como ==='rock'){
          result =  'Tie';
        }else if (como === 'paper'){
            result = 'You lose';
        }else{
          result = 'You win';
        }
      }
      
      if (result === 'You win') {
        score.wins++
      }else if (result === 'You lose'){
        score.losses++
      }else{
        score.ties++
      }

      localStorage.setItem('score',JSON.stringify(score))
      console.log('now json string')
      console.log(localStorage.getItem('score',JSON.stringify(score)))
      upse()

      document.querySelector('.js-rez').innerHTML = result;
      document.querySelector('.js-moves').innerHTML = `You <button class="gbt" style="border: none; width: 80px;" >${pic}</button> <button class = 'gbt' style="border: none; width: 80px;">${cpic}</button> Me`;
    //         alert(`You picked ${playermove}. I picked ${como+'. '+result}.
    // Wins: ${score.wins}, Losses: ${score.losses}, Ties: ${score.ties}`)
    }
    function pickm (){
      let como = '';
      const rand = Math.random()
      
      
      if (rand >= 0 && rand< 1/3)  {
        como = 'rock'
        cpic = '‚úä'

        }else if(rand >= 1/3 && rand< 2/3){
          como = 'scissors'
          cpic = '‚úå'
        }else{
          como = 'paper'
          cpic = 'üñê'
        }
        
      return como;
    }
    function upse() {
      document.querySelector('.js-score').innerHTML = `Wins: ${score.wins}, Losses: ${score.losses}, Ties: ${score.ties}`
    }

    let isAut = false;
    let intervid;

    function autpl(){
      if (!isAut){ //isAut==false (checking if wwe're not playing)
        // setInterval returns n interval ID(number), it's usec to stop an interval
        intervid = setInterval(() =>{
          const playermove = pickm()
          playgame(playermove)
        }, 1000)
        isAut = true
      }else{
        clearInterval(intervid)
        isAut = false;
      }  
    }
    document.querySelector('.eaup')
      .addEventListener('click', ()=>{
      autpl()
    })

    function raut(){
      if (isAut){
        clearInterval(intervid)
        isAut = false;
      }
    }
    document.body.addEventListener('keydown',(event)=>{
      console.log(event.key)
      if (event.key=== 'r'){
        playgame('rock')
      }else if (event.key === 'p'){
        playgame('paper')
      }else if (event.key === 's'){
        playgame('scissors')
      }
    })
  </script>
</body>
</html>